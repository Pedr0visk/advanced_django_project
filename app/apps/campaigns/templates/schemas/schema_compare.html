{% extends 'base.html' %}
{% load static %}

{% block extra_menu %}
{% include 'common/bop_menu.html' %}
{% endblock %}

{% block main %}
<div class="section container-fluid px-5">


  <!-- section title -->
  <div class="section-title mb-3">
    <p>Results for bop: "{{ bop }}"</p>
    <a type="button" class="btn btn-info"style="font-size: 12px" onclick="showmax()">Compare by Max</a>
    <a type="button" class="btn btn-info" style="font-size: 12px" onclick="showavg()">Compare by average</a>
  </div>
  <hr>

  <div class="section-content">

    <div class="row">
      <div class="col-12">
        <div id="average" class="table-responsive text-nowrap table-fixed">
          <table class="table table-results">
            <thead>
            <tr>
              <th colspan="3"></th>
              <!-- SF's -->
              {% for sf in safety_functions %}
              <th class="title" colspan="3" style="text-align: center">{{ sf.name }}</th>
              <th ><a href="{% url 'campaigns:compare_sf' campaign.pk 1 %}">compare SF Average</a></th>
              {% endfor %}
            </tr>

            <tr>
              <th colspan="3"></th>
              {% for sf in safety_functions %}
              <td class="cell">Average</td>
              <td class="cell" align="center">SIL Value</td>
              <td class="cell" align="center">Rel. Compar</td>
              <td></td>
              {% endfor %}
            </tr>

            </thead>
            <tbody>
            {% for schema in averages %}
            <tr>
              <td colspan="3"><b>{{schema.0}}</b></td>
              {% for coluna in schema.1 %}

              {% if coluna.0 > 0.01 %}
                <td>
                  {{ coluna.0  | stringformat:".2e" }}
                </td>
                <td style="color:black;background-color: red;opacity: 0.6; text-align: center;"> 1</td>
                {% elif coluna.0 > 0.001 %}
                <td>
                  {{ coluna.0  | stringformat:".2e" }}
                </td>
                <td style="color:black;background-color: orange;opacity: 0.6; text-align: center;"> 2
                </td>
                {% else %}
                <td>
                  {{ coluna.0  | stringformat:".2e" }}
                </td>
                <td style="color:black; background-color:  lime;opacity: 0.6; text-align: center">
                  3
                </td>
              {% endif %}

                <td style="text-align: center;">{{ coluna.1  | floatformat:2 }}</td>
                <td></td>
              {% endfor %}
            </tr>
            {% endfor %}
            </tbody>
          </table>
        </div>

        <div id="max" style="display: none" class="table-responsive text-nowrap table-fixed">
          <table class="table table-results">
            <thead>
            <tr>
              <th colspan="3"></th>
              <!-- SF's -->
              {% for sf in safety_functions %}
              <th class="title" colspan="3" style="text-align: center">{{ sf.name }}</th>
              <th ><a href="{% url 'campaigns:compare_sf' campaign.pk 1 %}">compare SF Max</a></th>
              {% endfor %}
            </tr>

            <tr>
              <th colspan="3"></th>
              {% for sf in safety_functions %}
              <td class="cell">Maximo</td>
              <td class="cell" align="center">SIL Value</td>
              <td class="cell" align="center">Rel. Compar</td>
              <td></td>
              {% endfor %}
            </tr>

            </thead>
            <tbody>
            {% for schema in maxi %}
            <tr>
              <td colspan="3"><b>{{schema.0}}</b></td>
              {% for coluna in schema.1 %}

              {% if coluna.0 > 0.01 %}
                <td>
                  {{ coluna.0  | stringformat:".2e" }}
                </td>
                <td style="color:black;background-color: red;opacity: 0.6; text-align: center;"> 1</td>
                {% elif coluna.0 > 0.001 %}
                <td>
                  {{ coluna.0  | stringformat:".2e" }}
                </td>
                <td style="color:black;background-color: orange;opacity: 0.6; text-align: center;"> 2
                </td>
                {% else %}
                <td>
                  {{ coluna.0  | stringformat:".2e" }}
                </td>
                <td style="color:black; background-color:  lime;opacity: 0.6; text-align: center">
                  3
                </td>
              {% endif %}

                <td style="text-align: center;">{{ coluna.1  | floatformat:2 }}</td>
                <td></td>
              {% endfor %}
            </tr>
            {% endfor %}
            </tbody>
          </table>
        </div>

      </div>
    </div>
  </div>

  <!-- compare -->
  <div class="container">

    <!-- modal 1 -->
    <div id="modalSf1">
      <!-- codigo aqui -->
      <div id="chart-compare-sf-1"></div>
    </div>

    <!-- modal 2 -->
    <div id="modalSf2">
      <!-- codigo aqui -->
      <div id="chart-compare-sf-2"></div>
    </div>

    <!-- modal 3 -->
    <div id="modalSf3">
      <!-- codigo aqui -->
      <div id="chart-compare-sf-3"></div>
    </div>
  </div>

</div>

<script>


function showavg() {
  var x = document.getElementById("average");
  var y = document.getElementById("max");

  if (x.style.display === "none") {
    x.style.display = "block";
    y.style.display = "none";
  } else {
    x.style.display = "none";
    y.style.display = "visible";
  }
}


function showmax() {
  var x = document.getElementById("max");
  var y = document.getElementById("average");

if (x.style.display === "none") {
    x.style.display = "block";
    y.style.display = "none";
  } else {
    x.style.display = "none";
    y.style.display = "visible";
  }
}

</script>


{% endblock %}
