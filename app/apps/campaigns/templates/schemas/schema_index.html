{% extends 'base.html' %}
{% load static %}
{% block breadcrumb %}
<!-- breadcrumb -->
<div class="page-title">
  <div class="container-fluid px-5">
    <div class="page-title-wrapper-2">
      <div class="page-title-heading-2">
        <a href="{% url 'campaigns:index' campaign_pk %}"><i class="fa fa-chevron-left"></i> Voltar</a>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block main %}
{% if messages %}
<ul class="messagelist">
  {% for message in messages %}
  <li class="success">{{ message }}</li>
  {% endfor %}
</ul>
{% endif %}
<!-- main -->
<div class="main">
  <!-- section 2 -->
  <div class="section">
    <div class="container-fluid px-5">
      <!-- section title -->
      <div class="section-title mb-3">
        <p>Schema "{{ schema.name }}"</p>
        <div>
            <a href="{% url 'campaigns:run' schema.pk %}" class="btn btn-sm btn-success mr-2">
            <small>RUN</small>
          </a>
          <a href="{% url 'campaigns:update_schema' schema.campaign.pk schema.pk %}"
             class="btn btn-sm btn-warning mr-2">
            <small>EDIT
              <i class="fa fa-pencil-alt"></i></small>
          </a>
          <a href="" class="btn btn-sm btn-danger"><small>DELETE <i
              class="fa fa-times"></i></small>
          </a>
        </div>
      </div>
      <hr>

      <!-- section content -->
      <div class="row">
        <div class="col-sm-12 col-12">
          <div class="results">
            <table class="table dnv-table m-0">
              <thead class="bg-white-50">
              <tr>
                <th scope="col">ID</th>
                <th scope="col">name</th>
                <th scope="col">duration</th>
                <th scope="col">start date</th>
                <th scope="col" style="text-align: center">is drilling</th>
                <th scope="col" style="text-align: center">has test</th>
                <th scope="col">test groups</th>
              </tr>
              </thead>
              <tbody>
              {% for phase in schema.phases.all %}
              <tr>
                <td>{{ phase.id }}</td>
                <td>{{ phase.name }}</td>
                <td>{{ phase.duration }}h</td>
                <td>{{ phase.start_date|date:"Y/m/d" }}</td>
                <td align="center">
                  {% if phase.has_drilling %}
                  <img src="{% static 'img/icon-yes.svg' %}"/>
                  {% else %}
                  <img src="{% static 'img/icon-no.svg' %}"/>
                  {% endif %}
                </td>
                <td align="center">
                  {% if phase.has_test %}
                  <img src="{% static 'img/icon-yes.svg' %}"/>
                  {% else %}
                  <img src="{% static 'img/icon-no.svg' %}"/>
                  {% endif %}
                </td>
                <td>
                  {% for tg in phase.test_groups.all %}
                  {{ tg.name }} |
                  {% endfor %}
                </td>
              </tr>
              {% endfor %}
              </tbody>
            </table>

          </div>
        </div>
      </div>
    </div>
  </div>

</div>
<!-- main -->
{% endblock %}
